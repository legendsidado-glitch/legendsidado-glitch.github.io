<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&lt;\&gt; Scriptsell</title>
    <link rel="icon" href="Scriptsell.png" type="image/png">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }

        body, html { width: 100%; height: 100%; overflow: hidden; background: #111; }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
        }

        .loading-circles {
            position: relative;
            width: 150px; height: 150px;
        }

        .circle {
            position: absolute;
            width: 20px; height: 20px;
            background: linear-gradient(135deg, #ff3cac, #784ba0);
            border-radius: 50%;
            animation: moveCircle 2s linear infinite;
        }

        @keyframes moveCircle {
            0% { transform: translate(0,0); }
            25% { transform: translate(50px, 30px); }
            50% { transform: translate(-50px, 50px); }
            75% { transform: translate(30px, -40px); }
            100% { transform: translate(0,0); }
        }

        /* Loading Text */
        #loading-text {
            color: #fff;
            font-size: 1.5rem;
            margin-top: 30px;
            text-align: center;
        }

        /* Loading Bar */
        #loading-bar-container {
            width: 300px;
            height: 20px;
            background: #222;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }

        #loading-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ff3cac, #784ba0);
            transition: width 0.2s ease;
        }

        #loading-percent {
            color: #fff;
            margin-top: 10px;
            font-size: 1rem;
        }
    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-circles">
            <div class="circle" style="top:0; left:50%; animation-delay:0s;"></div>
            <div class="circle" style="top:50%; left:100%; animation-delay:0.2s;"></div>
            <div class="circle" style="top:100%; left:50%; animation-delay:0.4s;"></div>
            <div class="circle" style="top:50%; left:0%; animation-delay:0.6s;"></div>
            <div class="circle" style="top:25%; left:75%; animation-delay:0.8s;"></div>
            <div class="circle" style="top:75%; left:25%; animation-delay:1s;"></div>
        </div>

        <div id="loading-text">Loading Scripts</div>

        <div id="loading-bar-container">
            <div id="loading-bar"></div>
        </div>
        <div id="loading-percent">0%</div>
    </div>

    <script>
        const loadingText = document.getElementById('loading-text');
        const loadingBar = document.getElementById('loading-bar');
        const loadingPercent = document.getElementById('loading-percent');

        const texts = [
            "Loading Scripts",
            "Loading Products",
            "Loading Cookies",
            "Loading Updates",
            "Loading Cart"
        ];

        let percent = 0;
        let textIndex = 0;

        const loadingInterval = setInterval(() => {
            percent++;
            loadingBar.style.width = percent + "%";
            loadingPercent.textContent = percent + "%";

            if(percent % 20 === 0 && textIndex < texts.length){
                loadingText.textContent = texts[textIndex];
                textIndex++;
            }

            if(percent >= 100){
                clearInterval(loadingInterval);
                // Flash transition
                document.body.insertAdjacentHTML('beforeend', '<div id="flash" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;z-index:10000;"></div>');
                setTimeout(() => {
                    document.getElementById('flash').remove();
                    document.getElementById('loading-screen').style.display = 'none';
                    initWebsite(); // Call website initialization function
                }, 300);
            }
        }, 50);

        function initWebsite(){
            // Placeholder: website content will be loaded here in next parts
        }
    </script>
</body>
</html>
<style>
    /* Website Background Animation */
    #background-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: #111;
    }

    /* Header */
    header {
        width: 100%;
        padding: 20px;
        text-align: center;
        color: #fff;
    }

    header h1 {
        font-size: 2.5rem;
        margin-bottom: 5px;
    }

    header h2 {
        font-size: 1.2rem;
        margin-bottom: 10px;
        color: #aaa;
    }

    #release-timer {
        font-size: 1rem;
        margin-bottom: 20px;
        color: #ff3cac;
    }

    /* Navigation Buttons */
    nav {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
    }

    nav a {
        padding: 10px 20px;
        color: #fff;
        background: #222;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: 0.3s;
    }

    nav a:hover {
        background: linear-gradient(90deg, #ff3cac, #784ba0);
        transform: scale(1.05);
    }
</style>

<!-- Background Canvas -->
<canvas id="background-canvas"></canvas>

<!-- Header -->
<header>
    <h1>&lt;\&gt; Scriptsell</h1>
    <h2>Buy Top Roblox Products</h2>
    <div id="release-timer"></div>
    <nav>
        <a href="index.html">Home</a>
        <a href="hot-deals.html">Best Deals</a>
        <a href="products.html">Best Products</a>
        <a href="infos.html">Info</a>
        <a href="all-products.html">All Products</a>
    </nav>
</header>

<script>
    // Release Timer
    function updateReleaseTimer() {
        const releaseDate = new Date('2026-01-01T00:00:00');
        const now = new Date();
        const diff = releaseDate - now;

        if(diff <= 0){
            document.getElementById('release-timer').textContent = "Released!";
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        document.getElementById('release-timer').textContent = `${days}d ${hours}h ${minutes}m ${seconds}s remaining`;
    }
    setInterval(updateReleaseTimer, 1000);
    updateReleaseTimer();

    // Background Animation
    const canvas = document.getElementById('background-canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const balls = [];
    const ballCount = 30;

    for(let i=0; i<ballCount; i++){
        balls.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: 3 + Math.random()*3,
            dx: (Math.random()-0.5) * 1.5,
            dy: (Math.random()-0.5) * 1.5
        });
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw lines (50% connected)
        for(let i=0; i<balls.length; i++){
            for(let j=i+1; j<balls.length; j++){
                if(Math.random() > 0.5) continue;
                ctx.beginPath();
                ctx.moveTo(balls[i].x, balls[i].y);
                ctx.lineTo(balls[j].x, balls[j].y);
                ctx.strokeStyle = 'rgba(120,75,160,0.2)';
                ctx.stroke();
            }
        }

        // Draw balls
        balls.forEach(ball => {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
            ctx.fillStyle = 'rgba(255,60,172,0.7)';
            ctx.fill();

            // Move
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Bounce
            if(ball.x < 0 || ball.x > canvas.width) ball.dx *= -1;
            if(ball.y < 0 || ball.y > canvas.height) ball.dy *= -1;
        });

        requestAnimationFrame(draw);
    }
    draw();

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
</script>
<style>
    /* Top Action Buttons */
    #top-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .action-btn {
        position: relative;
        padding: 10px 18px;
        background: #222;
        color: #fff;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.3s;
    }

    .action-btn:hover {
        background: linear-gradient(90deg, #ff3cac, #784ba0);
        transform: scale(1.05);
    }

    .action-btn:active {
        transform: scale(0.95);
    }

    /* Cart Bubble */
    .cart-bubble {
        position: absolute;
        top: -8px;
        right: -8px;
        background: red;
        color: #fff;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12px;
        font-weight: bold;
    }

    /* Custom Frames */
    .custom-frame {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: #1a1a1a;
        color: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(255,60,172,0.5);
        transition: transform 0.3s;
        z-index: 100;
        width: 400px;
        max-width: 90%;
    }

    .custom-frame.show {
        transform: translate(-50%, -50%) scale(1);
    }

    .frame-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .frame-header h3 {
        margin: 0;
        font-size: 1.3rem;
    }

    .close-btn {
        cursor: pointer;
        background: red;
        border: none;
        color: #fff;
        padding: 5px 10px;
        border-radius: 8px;
        font-weight: bold;
    }

    .frame-content {
        margin-bottom: 15px;
    }

    .frame-content input {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border-radius: 8px;
        border: none;
    }

    .submit-btn {
        cursor: pointer;
        background: green;
        border: none;
        color: #fff;
        padding: 10px 15px;
        border-radius: 10px;
        font-weight: bold;
        width: 100%;
        transition: 0.2s;
    }

    .submit-btn:hover {
        background: linear-gradient(90deg, #28ff7b, #0fd3ff);
    }
</style>

<div id="top-buttons">
    <div class="action-btn" id="admin-btn">Admin</div>
    <div class="action-btn" id="cart-btn">Cart <div class="cart-bubble" id="cart-count">0</div></div>
    <div class="action-btn" id="search-btn">Search</div>
    <div class="action-btn" id="login-btn">Login</div>
    <div class="action-btn" id="signin-btn">Sign In</div>
    <div class="action-btn" id="recommend-btn">Recommendations</div>
</div>

<!-- Cart Frame -->
<div class="custom-frame" id="cart-frame">
    <div class="frame-header">
        <h3>Cart</h3>
        <button class="close-btn" onclick="closeFrame('cart-frame')">X</button>
    </div>
    <div class="frame-content" id="cart-items"></div>
    <div class="frame-actions">
        <button class="submit-btn" onclick="clearCart()">Clear All</button>
        <button class="submit-btn" onclick="checkoutCart()">Checkout</button>
    </div>
</div>

<!-- Admin Frame -->
<div class="custom-frame" id="admin-frame">
    <div class="frame-header">
        <h3>Admin Panel</h3>
        <button class="close-btn" onclick="closeFrame('admin-frame')">X</button>
    </div>
    <div class="frame-content">
        <input type="text" id="admin-username" placeholder="Username">
        <input type="password" id="admin-password" placeholder="Password">
        <button class="submit-btn" onclick="submitAdminLogin()">Submit</button>
    </div>
</div>

<script>
    let cart = [];
    const cartCountEl = document.getElementById('cart-count');

    function updateCartBubble() {
        cartCountEl.textContent = cart.length;
    }

    function addToCart(product) {
        cart.push(product);
        updateCartBubble();
        renderCart();
    }

    function renderCart() {
        const container = document.getElementById('cart-items');
        container.innerHTML = '';
        cart.forEach((item, index) => {
            const div = document.createElement('div');
            div.textContent = `${item.name} - $${item.price} x ${item.amount || 1}`;
            container.appendChild(div);
        });
    }

    function clearCart() {
        cart = [];
        updateCartBubble();
        renderCart();
    }

    function checkoutCart() {
        alert(`Checkout: Total ${cart.reduce((a,b)=>a+b.price,0)}$`);
        clearCart();
        closeFrame('cart-frame');
    }

    function openFrame(id) {
        document.getElementById(id).classList.add('show');
    }

    function closeFrame(id) {
        document.getElementById(id).classList.remove('show');
    }

    // Button Events
    document.getElementById('cart-btn').addEventListener('click', ()=> openFrame('cart-frame'));
    document.getElementById('admin-btn').addEventListener('click', ()=> openFrame('admin-frame'));

    // Admin login logic (basic test)
    let adminAttempts = 0;
    const adminLockTime = 24 * 60 * 60 * 1000; // 24 hours
    function submitAdminLogin(){
        const username = document.getElementById('admin-username').value;
        const password = document.getElementById('admin-password').value;

        let lockedUntil = localStorage.getItem('adminLockedUntil');
        if(lockedUntil && Date.now() < lockedUntil){
            alert('Admin locked! Try later.');
            return;
        }

        if(username === 'user' && password === 'password'){
            alert('Admin access granted!');
            adminAttempts = 0;
            closeFrame('admin-frame');
        } else {
            adminAttempts++;
            if(adminAttempts >= 3){
                localStorage.setItem('adminLockedUntil', Date.now() + adminLockTime);
                alert('Too many wrong attempts! Locked for 24h.');
            } else {
                alert('Wrong credentials!');
            }
        }
    }
</script>
<!-- Login Frame -->
<div class="custom-frame" id="login-frame">
    <div class="frame-header">
        <h3>Login</h3>
        <button class="close-btn" onclick="closeFrame('login-frame')">X</button>
    </div>
    <div class="frame-content">
        <input type="text" id="login-username" placeholder="Username">
        <input type="password" id="login-password" placeholder="Password">
        <input type="text" id="login-rank" placeholder="Rank">
        <button class="submit-btn" onclick="submitLogin()">Login</button>
    </div>
</div>

<!-- Signin Frame -->
<div class="custom-frame" id="signin-frame">
    <div class="frame-header">
        <h3>Sign In</h3>
        <button class="close-btn" onclick="closeFrame('signin-frame')">X</button>
    </div>
    <div class="frame-content">
        <input type="text" id="signin-username" placeholder="Username">
        <input type="password" id="signin-password" placeholder="Password">
        <input type="password" id="signin-password2" placeholder="Confirm Password">
        <button class="submit-btn" onclick="submitSignin()">Create Account</button>
        <button class="submit-btn" id="see-btn" onclick="toggleSee()">See/Unsee</button>
    </div>
</div>

<!-- Recommendations Frame -->
<div class="custom-frame" id="recommend-frame">
    <div class="frame-header">
        <h3>Recommendations</h3>
        <button class="close-btn" onclick="closeFrame('recommend-frame')">X</button>
    </div>
    <div class="frame-content" id="recommend-list"></div>
    <input type="text" id="recommend-input" placeholder="Write your recommendation...">
    <button class="submit-btn" onclick="submitRecommendation()">Submit</button>
</div>

<script>
    // Session Management
    let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
    const users = JSON.parse(localStorage.getItem('users')) || {};
    let seePassword = false;

    function toggleSee(){
        seePassword = !seePassword;
        const passInput = document.getElementById('signin-password');
        const pass2Input = document.getElementById('signin-password2');
        passInput.type = seePassword ? 'text' : 'password';
        pass2Input.type = seePassword ? 'text' : 'password';
    }

    // Login logic
    let loginAttempts = 0;
    const loginLockTime = 60 * 60 * 1000; // 1 hour

    function submitLogin(){
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;
        const rank = document.getElementById('login-rank').value;

        let lockedUntil = localStorage.getItem('loginLockedUntil');
        if(lockedUntil && Date.now() < lockedUntil){
            alert('Login locked! Try later.');
            return;
        }

        if(users[username] && users[username].password === password && users[username].rank === rank){
            currentUser = {username, rank};
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            alert('Login successful!');
            closeFrame('login-frame');
        } else {
            loginAttempts++;
            if(loginAttempts >= 5){
                localStorage.setItem('loginLockedUntil', Date.now() + loginLockTime);
                alert('Too many wrong attempts! Locked for 1h.');
            } else {
                alert('Wrong credentials!');
            }
        }
    }

    // Signin logic
    function submitSignin(){
        const username = document.getElementById('signin-username').value;
        const password = document.getElementById('signin-password').value;
        const password2 = document.getElementById('signin-password2').value;

        if(users[username]){
            alert('Username already taken!');
            return;
        }
        if(password !== password2){
            alert('Passwords do not match!');
            return;
        }

        users[username] = {password, rank: 'user'};
        localStorage.setItem('users', JSON.stringify(users));
        currentUser = {username, rank: 'user'};
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        alert('Account created successfully!');
        closeFrame('signin-frame');
    }

    // Recommendations logic
    const recommendations = JSON.parse(localStorage.getItem('recommendations')) || [];

    function renderRecommendations(){
        const container = document.getElementById('recommend-list');
        container.innerHTML = '';
        recommendations.forEach(rec=>{
            const div = document.createElement('div');
            div.textContent = `(${rec.username} @ ${rec.time}): ${rec.text}`;
            container.appendChild(div);
        });
    }

    function submitRecommendation(){
        if(!currentUser){
            alert('You need to login to access recommendations');
            return;
        }
        const text = document.getElementById('recommend-input').value.trim();
        if(!text) return;

        const now = new Date();
        const timeStr = now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
        recommendations.push({username: currentUser.username, text, time: timeStr});
        localStorage.setItem('recommendations', JSON.stringify(recommendations));
        document.getElementById('recommend-input').value = '';
        renderRecommendations();
    }

    // Initialize
    if(currentUser) {
        console.log('Logged in as', currentUser.username);
    }
    renderRecommendations();

    // Top button events
    document.getElementById('login-btn').addEventListener('click', ()=> openFrame('login-frame'));
    document.getElementById('signin-btn').addEventListener('click', ()=> openFrame('signin-frame'));
    document.getElementById('recommend-btn').addEventListener('click', ()=> {
        if(!currentUser){
            alert('You need to login to access recommendations');
        } else {
            openFrame('recommend-frame');
        }
    });
</script>
<!-- Settings Frame -->
<div class="custom-frame" id="settings-frame">
    <div class="frame-header">
        <h3>Settings</h3>
        <button class="close-btn" onclick="closeFrame('settings-frame')">X</button>
    </div>
    <div class="frame-content">
        <label for="bg-color">Background Color:</label>
        <input type="color" id="bg-color" onchange="changeBackgroundColor()">

        <label for="music-volume">Music Volume:</label>
        <input type="range" id="music-volume" min="0" max="1" step="0.01" onchange="changeVolume()">

        <button class="submit-btn" onclick="logout()">Logout</button>
    </div>
</div>

<!-- Cookies Frame -->
<div class="custom-frame" id="cookies-frame">
    <div class="frame-header">
        <h3>Cookies Settings</h3>
        <button class="close-btn" onclick="closeFrame('cookies-frame')">X</button>
    </div>
    <div class="frame-content">
        <p>Manage your cookies preferences here:</p>
        <button class="submit-btn" onclick="acceptCookies()">Accept All Cookies</button>
        <button class="submit-btn" onclick="declineCookies()">Decline Cookies</button>
    </div>
</div>

<!-- Background Music -->
<audio id="bg-music" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
    // Open and close frames
    function openFrame(id){ document.getElementById(id).style.display = 'block'; }
    function closeFrame(id){ document.getElementById(id).style.display = 'none'; }

    // Background color setting
    const bgColorInput = document.getElementById('bg-color');
    const savedColor = localStorage.getItem('bgColor') || '#ffffff';
    document.body.style.backgroundColor = savedColor;
    bgColorInput.value = savedColor;

    function changeBackgroundColor(){
        const color = bgColorInput.value;
        document.body.style.backgroundColor = color;
        localStorage.setItem('bgColor', color);
    }

    // Background music control
    const music = document.getElementById('bg-music');
    const savedVolume = localStorage.getItem('musicVolume') || 0.5;
    music.volume = savedVolume;
    music.play();

    const volumeInput = document.getElementById('music-volume');
    volumeInput.value = savedVolume;

    function changeVolume(){
        const vol = volumeInput.value;
        music.volume = vol;
        localStorage.setItem('musicVolume', vol);
    }

    // Logout function
    function logout(){
        currentUser = null;
        localStorage.removeItem('currentUser');
        alert('You have been logged out.');
        closeFrame('settings-frame');
    }

    // Cookies functions
    function acceptCookies(){
        localStorage.setItem('cookiesAccepted', 'true');
        alert('Cookies accepted!');
        closeFrame('cookies-frame');
    }

    function declineCookies(){
        localStorage.setItem('cookiesAccepted', 'false');
        alert('Cookies declined!');
        closeFrame('cookies-frame');
    }

    // Buttons triggers
    document.getElementById('settings-btn').addEventListener('click', ()=>{
        if(currentUser){
            openFrame('settings-frame');
        } else {
            alert('You need to login to access settings');
        }
    });

    document.getElementById('cookies-btn').addEventListener('click', ()=>{
        openFrame('cookies-frame');
    });
</script>
<!-- Admin Panel Frame -->
<div class="custom-frame" id="admin-panel-frame">
    <div class="frame-header">
        <h3>Admin Panel</h3>
        <button class="close-btn" onclick="closeFrame('admin-panel-frame')">X</button>
    </div>
    <div class="frame-content">
        <!-- Add Product -->
        <div class="admin-section">
            <h4>Add Product</h4>
            <input type="text" id="add-name" placeholder="Product Name">
            <input type="number" id="add-price" placeholder="Price">
            <input type="datetime-local" id="add-timer" placeholder="Release Timer (Optional)">
            <input type="text" id="add-why" placeholder="Why Buy (Optional)">
            <input type="text" id="add-rank" placeholder="Rank (Optional)">
            <button class="submit-btn" onclick="addProduct()">Add Product</button>
        </div>

        <!-- Edit Product -->
        <div class="admin-section">
            <h4>Edit Product</h4>
            <input type="text" id="edit-id" placeholder="Product ID">
            <input type="text" id="edit-name" placeholder="New Name (Optional)">
            <input type="number" id="edit-price" placeholder="New Price (Optional)">
            <input type="datetime-local" id="edit-timer" placeholder="New Timer (Optional)">
            <input type="text" id="edit-why" placeholder="New Why Buy (Optional)">
            <button class="submit-btn" onclick="editProduct()">Edit Product</button>
        </div>

        <!-- Delete Product -->
        <div class="admin-section">
            <h4>Delete Product</h4>
            <input type="text" id="delete-id" placeholder="Product ID">
            <button class="submit-btn" onclick="deleteProduct()">Delete Product</button>
        </div>

        <!-- Shutdown -->
        <div class="admin-section">
            <h4>Shutdown Website</h4>
            <button class="submit-btn" onclick="shutdownWebsite()">Shutdown</button>
        </div>
    </div>
</div>

<script>
    // Sample product list storage
    let products = JSON.parse(localStorage.getItem('products')) || [];

    function saveProducts(){ localStorage.setItem('products', JSON.stringify(products)); }

    // Add Product
    function addProduct(){
        const name = document.getElementById('add-name').value;
        const price = document.getElementById('add-price').value;
        const timer = document.getElementById('add-timer').value || null;
        const why = document.getElementById('add-why').value || '';
        const rank = document.getElementById('add-rank').value || '';
        if(!name || !price){ alert('Name and Price are required'); return; }

        const id = Date.now().toString();
        products.push({id, name, price, timer, why, rank});
        saveProducts();
        alert('Product added successfully!');
    }

    // Edit Product
    function editProduct(){
        const id = document.getElementById('edit-id').value;
        const product = products.find(p => p.id === id);
        if(!product){ alert('Product not found'); return; }

        const name = document.getElementById('edit-name').value;
        const price = document.getElementById('edit-price').value;
        const timer = document.getElementById('edit-timer').value;
        const why = document.getElementById('edit-why').value;

        if(name) product.name = name;
        if(price) product.price = price;
        if(timer) product.timer = timer;
        if(why) product.why = why;

        saveProducts();
        alert('Product edited successfully!');
    }

    // Delete Product
    function deleteProduct(){
        const id = document.getElementById('delete-id').value;
        const index = products.findIndex(p => p.id === id);
        if(index === -1){ alert('Product not found'); return; }

        products.splice(index, 1);
        saveProducts();
        alert('Product deleted successfully!');
    }

    // Shutdown
    function shutdownWebsite(){
        if(confirm('Are you sure you want to shutdown the website?')){
            document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;">Website Shutdown</h1>';
        }
    }

    // Display timers on products dynamically
    function displayTimers(){
        const now = new Date().getTime();
        products.forEach(p=>{
            if(p.timer){
                const diff = new Date(p.timer).getTime() - now;
                p.remaining = diff > 0 ? diff : 0;
            }
        });
    }

    setInterval(displayTimers, 1000);
</script>
<!-- Cart Frame -->
<div class="custom-frame" id="cart-frame">
    <div class="frame-header">
        <h3>Cart</h3>
        <button class="close-btn" onclick="closeFrame('cart-frame')">X</button>
    </div>
    <div class="frame-content">
        <div id="cart-items"></div>
        <div class="cart-buttons">
            <button class="clear-btn" onclick="clearCart()">Clear All</button>
            <button class="checkout-btn" onclick="openCheckout()">Checkout</button>
        </div>
    </div>
</div>

<!-- Checkout Frame -->
<div class="custom-frame" id="checkout-frame">
    <div class="frame-header">
        <h3>Checkout</h3>
        <button class="close-btn" onclick="closeFrame('checkout-frame')">X</button>
    </div>
    <div class="frame-content">
        <div id="checkout-items"></div>
        <h4>Total: $<span id="checkout-total">0</span></h4>
        <button class="buy-btn" onclick="buyCart()">Buy</button>
    </div>
</div>

<script>
    // Cart persistent storage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function saveCart(){ localStorage.setItem('cart', JSON.stringify(cart)); }

    // Add product to cart
    function addToCart(productId){
        const product = products.find(p => p.id === productId);
        if(!product) return;

        const existing = cart.find(c => c.id === productId);
        if(existing){ existing.qty++; }
        else{ cart.push({id: productId, qty: 1}); }

        saveCart();
        updateCartUI();
    }

    // Remove product from cart
    function removeFromCart(productId){
        cart = cart.filter(c => c.id !== productId);
        saveCart();
        updateCartUI();
    }

    // Update quantity
    function updateQty(productId, qty){
        const item = cart.find(c => c.id === productId);
        if(item){
            item.qty = qty < 1 ? 1 : qty;
            saveCart();
            updateCartUI();
        }
    }

    // Clear cart
    function clearCart(){
        if(confirm('Clear all items from cart?')){
            cart = [];
            saveCart();
            updateCartUI();
        }
    }

    // Open Checkout
    function openCheckout(){
        const checkoutFrame = document.getElementById('checkout-frame');
        updateCheckout();
        checkoutFrame.style.display = 'block';
    }

    // Update Cart UI
    function updateCartUI(){
        const container = document.getElementById('cart-items');
        container.innerHTML = '';
        cart.forEach(item=>{
            const product = products.find(p => p.id === item.id);
            if(!product) return;
            const div = document.createElement('div');
            div.className = 'cart-item';
            div.innerHTML = `
                <span>${product.name} ($${product.price})</span>
                <input type="number" value="${item.qty}" min="1" onchange="updateQty('${item.id}', this.value)">
                <button onclick="removeFromCart('${item.id}')">Remove</button>
            `;
            container.appendChild(div);
        });
    }

    // Update Checkout UI
    function updateCheckout(){
        const container = document.getElementById('checkout-items');
        container.innerHTML = '';
        let total = 0;
        cart.forEach(item=>{
            const product = products.find(p => p.id === item.id);
            if(!product) return;
            total += product.price * item.qty;
            const div = document.createElement('div');
            div.className = 'checkout-item';
            div.innerHTML = `<span>${product.name} x ${item.qty} = $${product.price*item.qty}</span>`;
            container.appendChild(div);
        });
        document.getElementById('checkout-total').innerText = total.toFixed(2);
    }

    // Buy Cart
    function buyCart(){
        if(cart.length === 0){ alert('Cart is empty'); return; }
        alert('Purchase successful!');
        cart = [];
        saveCart();
        updateCartUI();
        closeFrame('checkout-frame');
        closeFrame('cart-frame');
    }

    // Open Cart Frame
    function openCart(){
        updateCartUI();
        document.getElementById('cart-frame').style.display = 'block';
    }

    // Update Cart bubble
    function updateCartBubble(){
        const bubble = document.getElementById('cart-bubble');
        const count = cart.reduce((acc, item) => acc + item.qty, 0);
        bubble.innerText = count;
    }

    setInterval(updateCartBubble, 500);
</script>
<!-- Login Frame -->
<div class="custom-frame" id="login-frame">
    <div class="frame-header">
        <h3>Login</h3>
        <button class="close-btn" onclick="closeFrame('login-frame')">X</button>
    </div>
    <div class="frame-content">
        <label>Username:</label>
        <input type="text" id="login-username">
        <label>Password:</label>
        <input type="password" id="login-password">
        <label>Rank:</label>
        <input type="text" id="login-rank">
        <button class="submit-btn" onclick="submitLogin()">Login</button>
        <div id="login-message" style="color:red; margin-top:5px;"></div>
    </div>
</div>

<!-- Signin Frame -->
<div class="custom-frame" id="signin-frame">
    <div class="frame-header">
        <h3>Sign In</h3>
        <button class="close-btn" onclick="closeFrame('signin-frame')">X</button>
    </div>
    <div class="frame-content">
        <label>Username:</label>
        <input type="text" id="signin-username">
        <label>Password:</label>
        <input type="password" id="signin-password">
        <label>Confirm Password:</label>
        <input type="password" id="signin-confirm-password">
        <button class="submit-btn" onclick="submitSignin()">Create Account</button>
        <div id="signin-message" style="color:red; margin-top:5px;"></div>
    </div>
</div>

<!-- Recommendations Frame -->
<div class="custom-frame" id="rec-frame">
    <div class="frame-header">
        <h3>Recommendations</h3>
        <button class="close-btn" onclick="closeFrame('rec-frame')">X</button>
    </div>
    <div class="frame-content">
        <div id="rec-list"></div>
        <input type="text" id="rec-input" placeholder="Write your recommendation...">
        <button class="submit-btn" onclick="submitRec()">Submit</button>
    </div>
</div>

<script>
    // Users persistent storage
    let users = JSON.parse(localStorage.getItem('users')) || [];
    let loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null;
    let recs = JSON.parse(localStorage.getItem('recs')) || [];

    // Signin
    function submitSignin(){
        const username = document.getElementById('signin-username').value.trim();
        const password = document.getElementById('signin-password').value;
        const confirm = document.getElementById('signin-confirm-password').value;
        const msg = document.getElementById('signin-message');

        if(!username || !password){ msg.innerText='All fields required'; return; }
        if(password !== confirm){ msg.innerText='Passwords do not match'; return; }
        if(users.find(u=>u.username===username)){ msg.innerText='Username taken'; return; }

        users.push({username, password, rank:'user'});
        localStorage.setItem('users', JSON.stringify(users));
        msg.style.color='green';
        msg.innerText='Account created! You can login now';
    }

    // Login
    function submitLogin(){
        const username = document.getElementById('login-username').value.trim();
        const password = document.getElementById('login-password').value;
        const rank = document.getElementById('login-rank').value.trim();
        const msg = document.getElementById('login-message');

        const user = users.find(u => u.username===username && u.password===password && u.rank===rank);
        if(!user){
            msg.innerText='Invalid credentials';
            return;
        }
        loggedInUser = user;
        localStorage.setItem('loggedInUser', JSON.stringify(user));
        msg.style.color='green';
        msg.innerText='Logged in!';
        closeFrame('login-frame');
        updateUIOnLogin();
    }

    // Update UI after login
    function updateUIOnLogin(){
        // Show Recommendations button if logged in
        document.getElementById('rec-btn').style.display = 'inline-block';
    }

    // Submit Recommendation
    function submitRec(){
        if(!loggedInUser){ 
            showTempMessage('U need to login to access the recommendations',3000); 
            return; 
        }
        const text = document.getElementById('rec-input').value.trim();
        if(!text) return;
        const time = new Date().toLocaleTimeString();
        recs.push({username: loggedInUser.username, text, time});
        localStorage.setItem('recs', JSON.stringify(recs));
        updateRecList();
        document.getElementById('rec-input').value='';
    }

    // Update Recommendation list
    function updateRecList(){
        const container = document.getElementById('rec-list');
        container.innerHTML='';
        recs.forEach(r=>{
            const div = document.createElement('div');
            div.className='rec-item';
            div.innerText = `(${r.time}) ${r.username}: ${r.text}`;
            container.appendChild(div);
        });
    }

    // Temp Message
    function showTempMessage(msg, duration){
        const el = document.createElement('div');
        el.innerText = msg;
        el.style.cssText = 'position:fixed;top:50px;left:50%;transform:translateX(-50%);background:#ff3333;color:#fff;padding:10px;border-radius:5px;z-index:1000;';
        document.body.appendChild(el);
        setTimeout(()=>{ document.body.removeChild(el); }, duration);
    }

    // Initialize Recommendations list
    updateRecList();

    // Auto login on page load
    if(loggedInUser){ updateUIOnLogin(); }
</script>
<!-- Settings Frame -->
<div class="custom-frame" id="settings-frame">
    <div class="frame-header">
        <h3>Settings</h3>
        <button class="close-btn" onclick="closeFrame('settings-frame')">X</button>
    </div>
    <div class="frame-content">
        <div id="settings-logout-container" style="margin-bottom:10px;"></div>
        <label>Background Color:</label>
        <input type="color" id="bg-color-picker">
        <label>Background Music Volume:</label>
        <input type="range" id="music-volume" min="0" max="1" step="0.01">
        <button class="submit-btn" onclick="applySettings()">Apply</button>
    </div>
</div>

<!-- Background Music -->
<audio id="bg-music" loop>
    <source src="background-music.mp3" type="audio/mp3">
</audio>

<script>
    // Persistent Settings
    let settings = JSON.parse(localStorage.getItem('settings')) || {bgColor:'#ffffff', musicVolume:0.5};

    const bgMusic = document.getElementById('bg-music');
    bgMusic.volume = settings.musicVolume;
    bgMusic.play();

    // Apply Settings
    function applySettings(){
        const bgColor = document.getElementById('bg-color-picker').value;
        const volume = parseFloat(document.getElementById('music-volume').value);
        document.body.style.backgroundColor = bgColor;
        bgMusic.volume = volume;
        settings.bgColor = bgColor;
        settings.musicVolume = volume;
        localStorage.setItem('settings', JSON.stringify(settings));
        showTempMessage('Settings Applied!',2000);
    }

    // Initialize Settings on Load
    document.getElementById('bg-color-picker').value = settings.bgColor;
    document.getElementById('music-volume').value = settings.musicVolume;
    document.body.style.backgroundColor = settings.bgColor;

    // Logout Button
    function setupLogoutButton(){
        const container = document.getElementById('settings-logout-container');
        container.innerHTML='';
        if(loggedInUser){
            const logoutBtn = document.createElement('button');
            logoutBtn.className='submit-btn';
            logoutBtn.innerText='Logout';
            logoutBtn.onclick = ()=>{
                loggedInUser=null;
                localStorage.removeItem('loggedInUser');
                updateUIOnLogout();
                showTempMessage('Logged out!',2000);
            };
            container.appendChild(logoutBtn);
        }
    }

    function updateUIOnLogout(){
        // Hide Recommendations button
        document.getElementById('rec-btn').style.display='none';
    }

    // Show Settings frame
    function openSettings(){
        if(!loggedInUser){
            showTempMessage('You need to login to access settings',3000);
            return;
        }
        setupLogoutButton();
        document.getElementById('settings-frame').style.display='block';
    }
</script>
<!-- Admin Panel Frame -->
<div class="custom-frame" id="admin-panel-frame">
    <div class="frame-header">
        <h3>Admin Panel</h3>
        <button class="close-btn" onclick="closeFrame('admin-panel-frame')">X</button>
    </div>
    <div class="frame-content">
        <!-- Password Section -->
        <div id="admin-password-section">
            <label>Username:</label>
            <input type="text" id="admin-username">
            <label>Password:</label>
            <input type="password" id="admin-password">
            <button class="submit-btn" onclick="checkAdminLogin()">Submit</button>
        </div>

        <!-- Admin Actions Section (hidden until correct login) -->
        <div id="admin-actions" style="display:none; margin-top:10px;">
            <button onclick="showAddProduct()">Add Product</button>
            <button onclick="showEditProduct()">Edit Product</button>
            <button onclick="showDeleteProduct()">Delete Product</button>
            <button onclick="shutdownWebsite()">Shutdown</button>
        </div>

        <!-- Add Product Frame -->
        <div id="add-product-frame" style="display:none; margin-top:10px;">
            <label>Product Name:</label><input type="text" id="add-name"><br>
            <label>Price:</label><input type="number" id="add-price"><br>
            <label>Release Timer (optional, YYYY-MM-DD):</label><input type="date" id="add-timer"><br>
            <label>Why Buy This (optional):</label><input type="text" id="add-why"><br>
            <label>Rank (optional, e.g., Bestseller, TOP PRODUCT):</label>
            <input type="text" id="add-rank"><br>
            <button class="submit-btn" onclick="addProduct()">Add Product</button>
        </div>

        <!-- Edit Product Frame -->
        <div id="edit-product-frame" style="display:none; margin-top:10px;">
            <label>Select Product to Edit:</label>
            <select id="edit-select"></select><br>
            <label>New Name:</label><input type="text" id="edit-name"><br>
            <label>New Price:</label><input type="number" id="edit-price"><br>
            <label>New Release Timer (optional):</label><input type="date" id="edit-timer"><br>
            <label>New Why Buy (optional):</label><input type="text" id="edit-why"><br>
            <label>New Rank (optional):</label><input type="text" id="edit-rank"><br>
            <button class="submit-btn" onclick="editProduct()">Save Changes</button>
        </div>

        <!-- Delete Product Frame -->
        <div id="delete-product-frame" style="display:none; margin-top:10px;">
            <label>Select Product to Delete:</label>
            <select id="delete-select"></select><br>
            <button class="submit-btn" onclick="deleteProduct()">Delete Product</button>
        </div>
    </div>
</div>

<script>
    // Admin Credentials
    const ADMIN_USER = "user";
    const ADMIN_PASS = "password";
    let adminAttempts = parseInt(localStorage.getItem('adminAttempts')) || 0;
    let adminLockedUntil = localStorage.getItem('adminLockedUntil') || null;

    // Product Data (persistent)
    let products = JSON.parse(localStorage.getItem('products')) || [];

    // Check Admin Login
    function checkAdminLogin(){
        const now = Date.now();
        if(adminLockedUntil && now < adminLockedUntil){
            showTempMessage(`Locked out. Try again later`,3000);
            return;
        }

        const username = document.getElementById('admin-username').value;
        const password = document.getElementById('admin-password').value;

        if(username===ADMIN_USER && password===ADMIN_PASS){
            document.getElementById('admin-password-section').style.display='none';
            document.getElementById('admin-actions').style.display='block';
            showTempMessage('Welcome Admin!',2000);
            setupEditDeleteSelects();
            adminAttempts=0;
            localStorage.setItem('adminAttempts', adminAttempts);
        } else {
            adminAttempts++;
            localStorage.setItem('adminAttempts', adminAttempts);
            if(adminAttempts>=3){
                adminLockedUntil = now + 24*60*60*1000; // 24h
                localStorage.setItem('adminLockedUntil', adminLockedUntil);
                showTempMessage('Locked out for 24 hours',3000);
            } else {
                showTempMessage(`Wrong credentials. Attempt ${adminAttempts}/3`,3000);
            }
        }
    }

    // Show frames
    function showAddProduct(){
        hideAllAdminFrames();
        document.getElementById('add-product-frame').style.display='block';
    }
    function showEditProduct(){
        hideAllAdminFrames();
        document.getElementById('edit-product-frame').style.display='block';
    }
    function showDeleteProduct(){
        hideAllAdminFrames();
        document.getElementById('delete-product-frame').style.display='block';
    }
    function hideAllAdminFrames(){
        document.getElementById('add-product-frame').style.display='none';
        document.getElementById('edit-product-frame').style.display='none';
        document.getElementById('delete-product-frame').style.display='none';
    }

    // Add Product
    function addProduct(){
        const name = document.getElementById('add-name').value;
        const price = parseFloat(document.getElementById('add-price').value);
        const timer = document.getElementById('add-timer').value || null;
        const why = document.getElementById('add-why').value || null;
        const rank = document.getElementById('add-rank').value || null;
        if(!name || !price) { showTempMessage('Name and price required',2000); return;}
        const newProduct = {name, price, timer, why, rank};
        products.push(newProduct);
        localStorage.setItem('products', JSON.stringify(products));
        showTempMessage('Product added!',2000);
        setupEditDeleteSelects();
        displayProducts();
    }

    // Edit Product
    function setupEditDeleteSelects(){
        const editSelect = document.getElementById('edit-select');
        const deleteSelect = document.getElementById('delete-select');
        editSelect.innerHTML='';
        deleteSelect.innerHTML='';
        products.forEach((p,i)=>{
            const option = document.createElement('option');
            option.value=i; option.text=p.name;
            editSelect.appendChild(option.cloneNode(true));
            deleteSelect.appendChild(option.cloneNode(true));
        });
    }

    function editProduct(){
        const idx = parseInt(document.getElementById('edit-select').value);
        if(idx<0 || idx>=products.length) return;
        const p = products[idx];
        const name = document.getElementById('edit-name').value;
        const price = parseFloat(document.getElementById('edit-price').value);
        const timer = document.getElementById('edit-timer').value || null;
        const why = document.getElementById('edit-why').value || null;
        const rank = document.getElementById('edit-rank').value || null;
        if(name) p.name = name;
        if(price) p.price = price;
        p.timer = timer; p.why=why; p.rank=rank;
        localStorage.setItem('products', JSON.stringify(products));
        showTempMessage('Product edited!',2000);
        setupEditDeleteSelects();
        displayProducts();
    }

    // Delete Product
    function deleteProduct(){
        const idx = parseInt(document.getElementById('delete-select').value);
        if(idx<0 || idx>=products.length) return;
        products.splice(idx,1);
        localStorage.setItem('products', JSON.stringify(products));
        showTempMessage('Product deleted!',2000);
        setupEditDeleteSelects();
        displayProducts();
    }

    // Shutdown Website
    function shutdownWebsite(){
        document.body.innerHTML='<h1 style="text-align:center;margin-top:50px;">Website Shutdown by Admin</h1>';
    }

    // Display Products dynamically
    function displayProducts(){
        const container = document.getElementById('products-section');
        if(!container) return;
        container.innerHTML='';
        products.forEach(p=>{
            const div = document.createElement('div');
            div.className='product-card';
            let rankBadge='';
            if(p.rank) rankBadge=`<span class="product-rank">${p.rank}</span>`;
            let timerText='';
            if(p.timer) timerText=`<div class="product-timer">Release: ${p.timer}</div>`;
            let whyText='';
            if(p.why) whyText=`<div class="product-why">Why Buy: ${p.why}</div>`;
            div.innerHTML=`${rankBadge}<h4>${p.name}</h4><div class="price">$${p.price.toFixed(2)}</div>${timerText}${whyText}`;
            container.appendChild(div);
        });
    }

    displayProducts();
</script>
