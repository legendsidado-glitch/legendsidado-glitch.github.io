<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&lt;\&gt; Scriptsell</title>
    <link rel="icon" href="Scriptsell.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* CSS Variables for colors */
        :root {
            --dark-blue: #0f172a;
            --electric-blue: #1c2a4c;
            --main-gradient: linear-gradient(90deg, #1c2a4c, #0f172a);
            --button-gradient: linear-gradient(90deg, #3a5068, #233140);
            --button-hover-gradient: linear-gradient(90deg, #233140, #3a5068);
            --ball-color: rgba(0, 198, 255, 0.7);
            --line-color: rgba(0, 198, 255, 0.2);
        }

        /* General styles and resets */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        body {
            width: 100%;
            height: 100%;
            background: var(--dark-blue);
            color: #fff;
            overflow-y: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Custom Scrollbar */
        body::-webkit-scrollbar {
            width: 12px;
        }
        body::-webkit-scrollbar-track {
            background: var(--dark-blue);
        }
        body::-webkit-scrollbar-thumb {
            background: var(--electric-blue);
            border-radius: 6px;
            border: 3px solid var(--dark-blue);
        }
        body::-webkit-scrollbar-thumb:hover {
            background: #2b3950;
        }
        
        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        #loading-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .loading-content {
            z-index: 1;
            text-align: center;
        }

        #loading-text {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        #loading-bar-container {
            width: 300px;
            height: 20px;
            background: #222;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }

        #loading-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            transition: width 0.2s ease;
        }

        #loading-percent {
            color: #fff;
            margin-top: 10px;
            font-size: 1rem;
        }

        /* Website Background Animation */
        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--dark-blue);
        }

        /* Header */
        header {
            width: 100%;
            padding: 20px;
            text-align: center;
            color: #fff;
            z-index: 2;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 5px;
            color: white;
            text-shadow: none;
        }
        header h2 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #aaa;
        }
        #release-timer {
            font-size: 1rem;
            margin-bottom: 20px;
            color: #00c6ff;
        }

        /* Navigation Buttons */
        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        nav a {
            padding: 10px 20px;
            color: #fff;
            background: var(--button-gradient);
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: 0.3s;
        }
        nav a:hover {
            background: var(--button-hover-gradient);
            transform: scale(1.05);
        }

        /* Top Action Buttons with Icons */
        #top-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            z-index: 2;
            flex-wrap: wrap; /* Allows buttons to wrap on smaller screens */
        }
        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 10px 18px;
            background: var(--button-gradient);
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            text-decoration: none;
        }
        .action-btn i {
            margin-right: 8px;
        }
        .action-btn:hover {
            background: var(--button-hover-gradient);
            transform: scale(1.05);
        }
        .action-btn:active {
            transform: scale(0.95);
        }
        .cart-bubble {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: #fff;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Custom Frames */
        .custom-frame {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: var(--main-gradient);
            color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 198, 255, 0.5);
            transition: transform 0.3s;
            z-index: 100;
            width: 400px;
            max-width: 90%;
            display: none;
            overflow-y: auto;
            max-height: 80vh;
        }
        .custom-frame.show {
            transform: translate(-50%, -50%) scale(1);
            display: block;
        }
        .frame-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .frame-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }
        .close-btn {
            cursor: pointer;
            background: #ff4757;
            border: none;
            color: #fff;
            padding: 5px 10px;
            border-radius: 8px;
            font-weight: bold;
            transition: background 0.2s;
        }
        .close-btn:hover {
            background: #e73444;
        }
        .frame-content {
            margin-bottom: 15px;
        }
        .frame-content input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border-radius: 8px;
            border: none;
            color: #fff;
            background: #333;
        }
        .submit-btn {
            cursor: pointer;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            border: none;
            color: #fff;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }
        .submit-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 0 10px rgba(0, 198, 255, 0.5);
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--electric-blue);
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
        .cart-buttons .submit-btn {
            width: 48%;
        }
        .admin-section {
            border-top: 1px solid var(--electric-blue);
            padding-top: 15px;
            margin-top: 15px;
        }
        /* Search Bar Style */
        .search-container {
            position: relative;
            width: 100%;
        }
        .search-container input {
            width: 100%;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #444;
            background: #222;
            color: #fff;
        }
        .search-results {
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .search-result-item {
            padding: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-radius: 8px;
        }
        .search-result-item:hover {
            background-color: rgba(0, 198, 255, 0.1);
        }
        
        /* Main content sections */
        main {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            z-index: 1;
        }
        .content-section {
            margin: 40px auto;
            padding: 20px;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        .content-section h3 {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
            color: #00c6ff;
        }
        .content-section p {
            font-size: 1rem;
            line-height: 1.6;
            text-align: center;
            max-width: 800px;
            margin: auto;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .product-card {
            background: var(--electric-blue);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s, border 0.3s;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 5px 20px rgba(0, 198, 255, 0.3);
        }
        .product-card.highlight {
            border: 2px solid #00c6ff;
            box-shadow: 0 0 20px #00c6ff;
        }
        .product-card img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .product-card h4 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        .product-card p {
            color: #aaa;
            margin-bottom: 15px;
        }
        .product-card .price {
            font-size: 1.2rem;
            color: #00c6ff;
            font-weight: bold;
        }

        .product-card .add-to-cart {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
        }

        .product-card .add-to-cart:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        /* Footer */
        footer {
            width: 100%;
            padding: 20px;
            background: #0d0d0d;
            text-align: center;
            margin-top: 40px;
            border-top: 1px solid var(--electric-blue);
            z-index: 1;
        }

        footer .social-links a {
            color: #aaa;
            margin: 0 10px;
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        footer .social-links a:hover {
            color: #00c6ff;
        }

        footer p {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #777;
        }

    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <canvas id="loading-canvas"></canvas>
        <div class="loading-content">
            <div id="loading-text">Loading Scripts</div>
            <div id="loading-bar-container">
                <div id="loading-bar"></div>
            </div>
            <div id="loading-percent">0%</div>
        </div>
    </div>

    <!-- Background Canvas -->
    <canvas id="background-canvas"></canvas>

    <!-- Header -->
    <header>
        <h1><span style="color:white; text-shadow: none;">&lt;\&gt; Scriptsell</span></h1>
        <h2>Buy Top Roblox Products</h2>
        <div id="release-timer"></div>
        <nav>
            <a href="javascript:void(0);" data-frame="home-frame">Home</a>
            <a href="javascript:void(0);" data-frame="hot-deals-frame">Best Deals</a>
            <a href="javascript:void(0);" data-frame="best-products-frame">Best Products</a>
            <a href="javascript:void(0);" data-frame="info-frame">Info</a>
            <a href="javascript:void(0);" data-frame="all-products-frame">All Products</a>
        </nav>
    </header>

    <!-- Top Action Buttons with Icons -->
    <div id="top-buttons">
        <a class="action-btn" data-frame="admin-frame"><i class="fas fa-user-shield"></i>Admin</a>
        <a class="action-btn" data-frame="cart-frame"><i class="fas fa-shopping-cart"></i>Cart <div class="cart-bubble" id="cart-count">0</div></a>
        <a class="action-btn" data-frame="search-frame"><i class="fas fa-search"></i>Search</a>
        <a class="action-btn" data-frame="login-frame"><i class="fas fa-sign-in-alt"></i>Login</a>
        <a class="action-btn" data-frame="signin-frame"><i class="fas fa-user-plus"></i>Sign In</a>
        <a class="action-btn" data-frame="recommend-frame"><i class="fas fa-star"></i>Recommendations</a>
        <a class="action-btn" data-frame="settings-frame"><i class="fas fa-cog"></i>Settings</a>
        <a class="action-btn" data-frame="cookies-frame"><i class="fas fa-cookie-bite"></i>Cookies</a>
    </div>

    <!-- Main content sections -->
    <main>
        <!-- Why Us Section -->
        <section id="why-us" class="content-section">
            <h3>Why Choose Us?</h3>
            <p>At Scriptsell, we provide top-tier Roblox scripts and assets, ensuring you get the highest quality products for your projects. Our commitment is to offer reliable, efficient, and well-supported solutions to help you succeed in the Roblox development community.</p>
        </section>

        <!-- Products Section -->
        <section id="products" class="content-section">
            <h3>Featured Products</h3>
            <div id="product-list" class="product-grid">
                <!-- Product cards will be generated here by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="social-links">
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-discord"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <p>&copy; 2025 Scriptsell. All rights reserved.</p>
    </footer>

    <!-- Single, Dynamic Custom Frame -->
    <div class="custom-frame" id="dynamic-frame">
        <div class="frame-header">
            <h3 id="frame-title"></h3>
            <button class="close-btn" onclick="closeFrame()">X</button>
        </div>
        <div class="frame-content" id="frame-content-container"></div>
    </div>

    <!-- Background Music -->
    <audio id="bg-music" loop>
        <source src="good-night-lofi-cozy-chill-music-160166.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Loading screen logic
        const loadingText = document.getElementById('loading-text');
        const loadingBar = document.getElementById('loading-bar');
        const loadingPercent = document.getElementById('loading-percent');
        const dynamicFrame = document.getElementById('dynamic-frame');
        const frameTitle = document.getElementById('frame-title');
        const frameContentContainer = document.getElementById('frame-content-container');
        const loadingCanvas = document.getElementById('loading-canvas');
        const lCtx = loadingCanvas.getContext('2d');
        const music = document.getElementById('bg-music');

        const loadingPoints = [];
        const pointCount = 100;

        function createLoadingPoints() {
            loadingCanvas.width = window.innerWidth;
            loadingCanvas.height = window.innerHeight;
            for (let i = 0; i < pointCount; i++) {
                loadingPoints.push({
                    x: Math.random() * loadingCanvas.width,
                    y: Math.random() * loadingCanvas.height,
                    radius: Math.random() * 2 + 1,
                    dx: (Math.random() - 0.5) * 0.5,
                    dy: (Math.random() - 0.5) * 0.5,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`
                });
            }
        }

        function drawLoading() {
            lCtx.clearRect(0, 0, loadingCanvas.width, loadingCanvas.height);

            for (let i = 0; i < loadingPoints.length; i++) {
                for (let j = i + 1; j < loadingPoints.length; j++) {
                    const dist = Math.sqrt(Math.pow(loadingPoints[i].x - loadingPoints[j].x, 2) + Math.pow(loadingPoints[i].y - loadingPoints[j].y, 2));
                    if (dist < 100) {
                        lCtx.beginPath();
                        lCtx.moveTo(loadingPoints[i].x, loadingPoints[i].y);
                        lCtx.lineTo(loadingPoints[j].x, loadingPoints[j].y);
                        lCtx.strokeStyle = `rgba(0, 198, 255, ${1 - dist / 100})`;
                        lCtx.stroke();
                    }
                }
            }

            loadingPoints.forEach(point => {
                lCtx.beginPath();
                lCtx.arc(point.x, point.y, point.radius, 0, Math.PI * 2);
                lCtx.fillStyle = `rgba(0, 198, 255, 0.8)`;
                lCtx.fill();
                point.x += point.dx;
                point.y += point.dy;
                if (point.x < 0 || point.x > loadingCanvas.width) point.dx *= -1;
                if (point.y < 0 || point.y > loadingCanvas.height) point.dy *= -1;
            });

            requestAnimationFrame(drawLoading);
        }

        createLoadingPoints();
        drawLoading();

        window.addEventListener('resize', () => {
            loadingCanvas.width = window.innerWidth;
            loadingCanvas.height = window.innerHeight;
            loadingPoints.forEach(point => {
                point.x = Math.random() * loadingCanvas.width;
                point.y = Math.random() * loadingCanvas.height;
            });
        });

        const texts = [
            "Loading Scripts",
            "Loading Products",
            "Loading Cookies",
            "Loading Updates",
            "Loading Cart"
        ];

        let percent = 0;
        let textIndex = 0;

        const loadingInterval = setInterval(() => {
            percent++;
            loadingBar.style.width = percent + "%";
            loadingPercent.textContent = percent + "%";

            if (percent % 20 === 0 && textIndex < texts.length) {
                loadingText.textContent = texts[textIndex];
                textIndex++;
            }

            if (percent >= 100) {
                clearInterval(loadingInterval);
                document.getElementById('loading-screen').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                    initWebsite();
                }, 500);
            }
        }, 30);

        function openFrame(title, content) {
            frameTitle.textContent = title;
            frameContentContainer.innerHTML = content;
            dynamicFrame.classList.add('show');
        }

        function closeFrame() {
            dynamicFrame.classList.remove('show');
        }

        function showMessage(message) {
            const messageFrame = document.createElement('div');
            messageFrame.className = 'custom-frame show';
            messageFrame.innerHTML = `
                <div class="frame-header">
                    <h3>Notification</h3>
                    <button class="close-btn" onclick="this.parentNode.parentNode.remove()">X</button>
                </div>
                <div class="frame-content">
                    <p>${message}</p>
                </div>
            `;
            document.body.appendChild(messageFrame);
        }

        function confirmAction(message, onConfirm) {
            const confirmFrame = document.createElement('div');
            confirmFrame.className = 'custom-frame show';
            confirmFrame.innerHTML = `
                <div class="frame-header">
                    <h3>Confirm</h3>
                    <button class="close-btn" onclick="this.parentNode.parentNode.remove()">X</button>
                </div>
                <div class="frame-content">
                    <p>${message}</p>
                    <div class="cart-buttons">
                        <button class="submit-btn" onclick="window.handleConfirm(true, '${btoa(onConfirm.toString())}'); this.parentNode.parentNode.parentNode.remove();">Yes</button>
                        <button class="submit-btn" onclick="window.handleConfirm(false); this.parentNode.parentNode.parentNode.remove();">No</button>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmFrame);
        }

        window.handleConfirm = (result, callbackStr) => {
            if (result) {
                try {
                    const callback = atob(callbackStr);
                    eval(`(${callback})()`);
                } catch (e) {
                    console.error('Error executing callback:', e);
                }
            }
        };

        // Anti-Hack Logic
        const loginAttempts = JSON.parse(localStorage.getItem('loginAttempts')) || {};
        const MAX_ATTEMPTS = 5;
        const LOCKOUT_TIME = 60 * 1000; // 1 minute

        function checkLoginAttempt(email) {
            if (!loginAttempts[email]) {
                loginAttempts[email] = { count: 0, locked: null };
            }
            const now = Date.now();
            if (loginAttempts[email].locked && now < loginAttempts[email].locked) {
                return false;
            }
            loginAttempts[email].count++;
            if (loginAttempts[email].count >= MAX_ATTEMPTS) {
                loginAttempts[email].locked = now + LOCKOUT_TIME;
                loginAttempts[email].count = 0;
                localStorage.setItem('loginAttempts', JSON.stringify(loginAttempts));
                return false;
            }
            localStorage.setItem('loginAttempts', JSON.stringify(loginAttempts));
            return true;
        }

        function resetLoginAttempts(email) {
            if (loginAttempts[email]) {
                loginAttempts[email].count = 0;
                loginAttempts[email].locked = null;
                localStorage.setItem('loginAttempts', JSON.stringify(loginAttempts));
            }
        }

        // All other JS is moved to this function to run after the loading screen
        function initWebsite() {
            const savedVolume = localStorage.getItem('musicVolume') || 0.5;
            music.volume = savedVolume;
            music.play().catch(e => console.log('Autoplay blocked:', e));

            // Release Timer
            function updateReleaseTimer() {
                const releaseDate = new Date('2026-01-01T00:00:00');
                const now = new Date();
                const diff = releaseDate - now;
                if (diff <= 0) {
                    document.getElementById('release-timer').textContent = "Released!";
                    return;
                }
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / (1000 * 60)) % 60);
                const seconds = Math.floor((diff / 1000) % 60);
                document.getElementById('release-timer').textContent = `${days}d ${hours}h ${minutes}m ${seconds}s remaining`;
            }
            setInterval(updateReleaseTimer, 1000);
            updateReleaseTimer();

            // Background Animation
            const canvas = document.getElementById('background-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const balls = [];
            const ballCount = 30;
            let ballColor = localStorage.getItem('ballColor') || 'rgba(0, 198, 255, 0.7)';
            let lineColor = localStorage.getItem('lineColor') || 'rgba(0, 198, 255, 0.2)';

            for (let i = 0; i < ballCount; i++) {
                balls.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: 3 + Math.random() * 3,
                    dx: (Math.random() - 0.5) * 1.5,
                    dy: (Math.random() - 0.5) * 1.5
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < balls.length; i++) {
                    for (let j = i + 1; j < balls.length; j++) {
                        if (Math.random() > 0.5) continue;
                        ctx.beginPath();
                        ctx.moveTo(balls[i].x, balls[i].y);
                        ctx.lineTo(balls[j].x, balls[j].y);
                        ctx.strokeStyle = lineColor;
                        ctx.stroke();
                    }
                }
                balls.forEach(ball => {
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    ctx.fillStyle = ballColor;
                    ctx.fill();
                    ball.x += ball.dx;
                    ball.y += ball.dy;
                    if (ball.x < 0 || ball.x > canvas.width) ball.dx *= -1;
                    if (ball.y < 0 || ball.y > canvas.height) ball.dy *= -1;
                });
                requestAnimationFrame(draw);
            }
            draw();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            // Cart and Checkout Logic
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCountEl = document.getElementById('cart-count');

            function saveCart() {
                localStorage.setItem('cart', JSON.stringify(cart));
            }

            function updateCartBubble() {
                cartCountEl.textContent = cart.length;
            }

            function getCartContent() {
                let html = '<div id="cart-items">';
                if (cart.length === 0) {
                    html += '<p>Your cart is empty.</p>';
                } else {
                    cart.forEach(item => {
                        const product = products.find(p => p.id === item.id);
                        if (!product) return;
                        html += `
                            <div class="cart-item">
                                <span>${product.name} ($${product.price})</span>
                                <input type="number" value="${item.qty}" min="1" onchange="window.updateQty('${item.id}', this.value)">
                                <button onclick="window.removeFromCart('${item.id}')">Remove</button>
                            </div>
                        `;
                    });
                }
                html += `</div><div class="frame-actions cart-buttons">
                    <button class="submit-btn" onclick="window.clearCart()">Clear All</button>
                    <button class="submit-btn" onclick="window.openCheckout()">Checkout</button>
                </div>`;
                return html;
            }

            function updateCartUI() {
                const cartContent = getCartContent();
                if (dynamicFrame.classList.contains('show') && frameTitle.textContent === 'Cart') {
                     openFrame('Cart', cartContent);
                }
                updateCartBubble();
            }

            function addToCart(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) {
                    showMessage('Product not found!');
                    return;
                }
                const existing = cart.find(c => c.id === productId);
                if (existing) {
                    existing.qty++;
                } else {
                    cart.push({
                        id: productId,
                        qty: 1
                    });
                }
                saveCart();
                updateCartUI();
                showMessage(`${product.name} added to cart!`);
            }

            function removeFromCart(productId) {
                cart = cart.filter(c => c.id !== productId);
                saveCart();
                updateCartUI();
            }

            function updateQty(productId, qty) {
                const item = cart.find(c => c.id === productId);
                if (item) {
                    item.qty = parseInt(qty, 10) < 1 ? 1 : parseInt(qty, 10);
                    saveCart();
                    updateCartUI();
                }
            }

            function clearCart() {
                 confirmAction('Clear all items from cart?', () => {
                    cart = [];
                    saveCart();
                    updateCartUI();
                    closeFrame();
                 });
            }

            function openCheckout() {
                closeFrame();
                const total = cart.reduce((a, item) => {
                    const product = products.find(p => p.id === item.id);
                    return a + (product ? product.price * item.qty : 0);
                }, 0);
                let checkoutContent = '<div id="checkout-items">';
                cart.forEach(item => {
                    const product = products.find(p => p.id === item.id);
                    if (!product) return;
                    const itemTotal = product.price * item.qty;
                    checkoutContent += `<div>${product.name} ($${product.price}) x ${item.qty} = $${itemTotal.toFixed(2)}</div>`;
                });
                checkoutContent += `</div><h4>Total: $<span id="checkout-total">${total.toFixed(2)}</span></h4>
                                     <button class="submit-btn" onclick="window.buyCart()">Buy</button>`;
                openFrame('Checkout', checkoutContent);
            }

            function buyCart() {
                const total = cart.reduce((a, item) => {
                    const product = products.find(p => p.id === item.id);
                    return a + (product ? product.price * item.qty : 0);
                }, 0);
                showMessage(`Checkout completed! Total amount: $${total.toFixed(2)}`);
                cart = [];
                saveCart();
                updateCartUI();
                closeFrame();
            }

            // User Management
            let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
            const users = JSON.parse(localStorage.getItem('users')) || {};

            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function submitLogin() {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                if (!isValidEmail(email)) {
                    showMessage('Please enter a valid email address.');
                    return;
                }
                if (!checkLoginAttempt(email)) {
                    showMessage('Too many failed attempts. Please try again later.');
                    return;
                }
                if (users[email] && users[email].password === password) {
                    currentUser = { email, rank: users[email].rank };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    resetLoginAttempts(email);
                    showMessage('Login successful!');
                    closeFrame();
                } else {
                    showMessage('Wrong credentials!');
                }
            }

            function submitSignin() {
                const email = document.getElementById('signin-email').value;
                const password = document.getElementById('signin-password').value;
                const password2 = document.getElementById('signin-password2').value;
                if (!isValidEmail(email)) {
                    showMessage('Please enter a valid email address.');
                    return;
                }
                if (users[email]) {
                    showMessage('Email already taken!');
                    return;
                }
                if (password !== password2) {
                    showMessage('Passwords do not match!');
                    return;
                }
                users[email] = { password, rank: 'user' };
                localStorage.setItem('users', JSON.stringify(users));
                currentUser = { email, rank: 'user' };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showMessage('Account created successfully!');
                closeFrame();
            }
            
            // Recommendations
            const recommendations = JSON.parse(localStorage.getItem('recommendations')) || [];

            function renderRecommendations() {
                let html = '<div id="recommend-list">';
                recommendations.forEach(rec => {
                    html += `<div>(${rec.email} @ ${rec.time}): ${rec.text}</div>`;
                });
                html += `</div><input type="text" id="recommend-input" placeholder="Write your recommendation...">
                          <button class="submit-btn" onclick="window.submitRecommendation()">Submit</button>`;
                return html;
            }

            function submitRecommendation() {
                if (!currentUser) {
                    showMessage('You need to login to access recommendations');
                    return;
                }
                const text = document.getElementById('recommend-input').value.trim();
                if (!text) return;
                const now = new Date();
                const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                recommendations.push({ email: currentUser.email, text, time: timeStr });
                localStorage.setItem('recommendations', JSON.stringify(recommendations));
                openFrame('Recommendations', renderRecommendations());
            }

            // Admin Logic
            function submitAdminLogin() {
                const username = document.getElementById('admin-email').value;
                const password = document.getElementById('admin-password').value;
                if (username === 'admin@scriptsell.com' && password === 'admin123') {
                    currentUser = { email: username, rank: 'admin' };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showMessage('Admin access granted!');
                    closeFrame();
                    openFrame('Admin Panel', getAdminPanelContent());
                } else {
                    showMessage('Wrong credentials!');
                }
            }

            function getAdminPanelContent() {
                if (!currentUser || currentUser.rank !== 'admin') {
                     return `<p>You do not have permission to view this page.</p>`;
                }
                return `
                    <div class="admin-section">
                        <h4>Add Product</h4>
                        <input type="text" id="add-name" placeholder="Product Name">
                        <input type="number" id="add-price" placeholder="Price">
                        <input type="text" id="add-why" placeholder="Why Buy (Optional)">
                        <button class="submit-btn" onclick="window.addProduct()">Add Product</button>
                    </div>
                    <div class="admin-section">
                        <h4>Edit Product</h4>
                        <input type="text" id="edit-id" placeholder="Product ID">
                        <input type="text" id="edit-name" placeholder="New Name (Optional)">
                        <input type="number" id="edit-price" placeholder="New Price (Optional)">
                        <input type="text" id="edit-why" placeholder="New Why Buy (Optional)">
                        <button class="submit-btn" onclick="window.editProduct()">Edit Product</button>
                    </div>
                    <div class="admin-section">
                        <h4>Delete Product</h4>
                        <input type="text" id="delete-id" placeholder="Product ID">
                        <button class="submit-btn" onclick="window.deleteProduct()">Delete Product</button>
                    </div>
                    <div class="admin-section">
                        <h4>Shutdown Website</h4>
                        <button class="submit-btn" onclick="window.shutdownWebsite()">Shutdown</button>
                    </div>
                `;
            }

            // Products
            let products = JSON.parse(localStorage.getItem('products')) || [
                { id: '1', name: 'Infinite Jump', price: 9.99, image: 'https://placehold.co/200x200/222/fff?text=Infinite+Jump', why: 'Jump to new heights in any game!' },
                { id: '2', name: 'Speed Boost', price: 14.99, image: 'https://placehold.co/200x200/222/fff?text=Speed+Boost', why: 'Run faster than everyone else.' },
                { id: '3', name: 'God Mode', price: 29.99, image: 'https://placehold.co/200x200/222/fff?text=God+Mode', why: 'Become invincible and dominate!' },
                { id: '4', name: 'ESP', price: 19.99, image: 'https://placehold.co/200x200/222/fff?text=ESP', why: 'See enemies through walls.' }
            ];

            function saveProducts() {
                localStorage.setItem('products', JSON.stringify(products));
            }

            function renderProducts(filteredProducts = products) {
                const container = document.getElementById('product-list');
                container.innerHTML = '';
                if (filteredProducts.length === 0) {
                    container.innerHTML = '<p style="text-align: center; width: 100%;">No products found.</p>';
                    return;
                }
                filteredProducts.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.id = `product-${product.id}`;
                    card.innerHTML = `
                        <h4>${product.name}</h4>
                        <img src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/200x200/222/fff?text=Image+Error'">
                        <p>${product.why}</p>
                        <p class="price">$${product.price.toFixed(2)}</p>
                        <button class="add-to-cart" onclick="window.addToCart('${product.id}')">Add to Cart</button>
                    `;
                    container.appendChild(card);
                });
            }

            // Search functionality
            function performSearch() {
                const query = document.getElementById('search-input').value.toLowerCase();
                const searchResults = document.getElementById('search-results');
                if (query.length === 0) {
                    searchResults.innerHTML = '';
                    return;
                }
                const filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(query) ||
                    product.why.toLowerCase().includes(query)
                );
                
                if (filteredProducts.length > 0) {
                    let resultsHtml = '';
                    filteredProducts.forEach(product => {
                        resultsHtml += `<div class="search-result-item" onclick="window.showProduct('${product.id}')">${product.name}</div>`;
                    });
                    searchResults.innerHTML = resultsHtml;
                } else {
                    searchResults.innerHTML = '<p>No products found.</p>';
                }
            }

            function showProduct(productId) {
                closeFrame();
                const productCard = document.getElementById(`product-${productId}`);
                if (productCard) {
                    document.querySelectorAll('.product-card').forEach(card => card.classList.remove('highlight'));
                    productCard.classList.add('highlight');
                    productCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    setTimeout(() => {
                        productCard.classList.remove('highlight');
                    }, 3000);
                }
            }

            function addProduct() {
                const name = document.getElementById('add-name').value;
                const price = parseFloat(document.getElementById('add-price').value);
                const why = document.getElementById('add-why').value || '';
                if (!name || isNaN(price)) {
                    showMessage('Name and Price are required');
                    return;
                }
                const id = Date.now().toString();
                products.push({ id, name, price, why, image: 'https://placehold.co/200x200/222/fff?text=' + encodeURIComponent(name) });
                saveProducts();
                renderProducts();
                showMessage('Product added successfully!');
                openFrame('Admin Panel', getAdminPanelContent());
            }

            function editProduct() {
                const id = document.getElementById('edit-id').value;
                const product = products.find(p => p.id === id);
                if (!product) {
                    showMessage('Product not found');
                    return;
                }
                const name = document.getElementById('edit-name').value;
                const price = document.getElementById('edit-price').value;
                const why = document.getElementById('edit-why').value;
                if (name) product.name = name;
                if (price) product.price = parseFloat(price);
                if (why) product.why = why;
                saveProducts();
                renderProducts();
                showMessage('Product edited successfully!');
                openFrame('Admin Panel', getAdminPanelContent());
            }

            function deleteProduct() {
                const id = document.getElementById('delete-id').value;
                const index = products.findIndex(p => p.id === id);
                if (index === -1) {
                    showMessage('Product not found');
                    return;
                }
                products.splice(index, 1);
                saveProducts();
                renderProducts();
                showMessage('Product deleted successfully!');
                openFrame('Admin Panel', getAdminPanelContent());
            }

            function shutdownWebsite() {
                confirmAction('Are you sure you want to shut down the website?', () => {
                    document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;">Website Shutdown</h1>';
                });
            }

            // Settings and Cookies
            function getSettingsContent() {
                const savedVolume = localStorage.getItem('musicVolume') || 0.5;
                const savedBallColor = localStorage.getItem('ballColor') || '#00c6ff';
                const savedLineColor = localStorage.getItem('lineColor') || '#00c6ff';
                return `
                    <label for="music-volume">Music Volume:</label>
                    <input type="range" id="music-volume" min="0" max="1" step="0.01" value="${savedVolume}" onchange="window.changeVolume()">
                    <div style="margin-top: 20px;">
                        <label for="ball-color">Ball Color:</label>
                        <input type="color" id="ball-color" value="${savedBallColor}" onchange="window.saveColors()">
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="line-color">Line Color:</label>
                        <input type="color" id="line-color" value="${savedLineColor}" onchange="window.saveColors()">
                    </div>
                    <button class="submit-btn" onclick="window.logout()">Logout</button>
                `;
            }

            function changeVolume() {
                const vol = document.getElementById('music-volume').value;
                music.volume = vol;
                localStorage.setItem('musicVolume', vol);
            }

            function saveColors() {
                const ballColorInput = document.getElementById('ball-color').value;
                const lineColorInput = document.getElementById('line-color').value;
                ballColor = ballColorInput;
                lineColor = lineColorInput;
                localStorage.setItem('ballColor', ballColorInput);
                localStorage.setItem('lineColor', lineColorInput);
            }

            function logout() {
                currentUser = null;
                localStorage.removeItem('currentUser');
                showMessage('You have been logged out.');
                closeFrame();
            }

            function getCookiesContent() {
                return `
                    <p>Manage your cookies preferences here:</p>
                    <button class="submit-btn" onclick="window.acceptCookies()">Accept All Cookies</button>
                    <button class="submit-btn" onclick="window.declineCookies()">Decline Cookies</button>
                `;
            }

            function acceptCookies() {
                localStorage.setItem('cookiesAccepted', 'true');
                showMessage('Cookies accepted!');
                closeFrame();
            }

            function declineCookies() {
                localStorage.setItem('cookiesAccepted', 'false');
                showMessage('Cookies declined!');
                closeFrame();
            }

            // Navigation Frame Content
            function getHomeContent() {
                return `<p>Welcome to the Scriptsell homepage!</p><p>We specialize in providing high-quality Roblox assets and scripts.</p>`;
            }

            function getHotDealsContent() {
                const hotDeals = products.filter(p => p.price <= 10);
                if (hotDeals.length === 0) {
                    return `<p>No hot deals at the moment. Check back later!</p>`;
                }
                let html = '<div class="product-grid">';
                hotDeals.forEach(p => {
                    html += `
                        <div class="product-card">
                            <h4>${p.name}</h4>
                            <p class="price">$${p.price.toFixed(2)}</p>
                        </div>
                    `;
                });
                html += '</div>';
                return html;
            }

            function getBestProductsContent() {
                 const bestProducts = products.filter(p => p.price > 10);
                 if (bestProducts.length === 0) {
                     return `<p>No best products at the moment.</p>`;
                 }
                 let html = '<div class="product-grid">';
                 bestProducts.forEach(p => {
                     html += `
                         <div class="product-card">
                             <h4>${p.name}</h4>
                             <p class="price">$${p.price.toFixed(2)}</p>
                         </div>
                     `;
                 });
                 html += '</div>';
                 return html;
            }

            function getInfoContent() {
                return `<p>This is a demonstration website for a fictional Roblox script marketplace.</p><p>We are dedicated to providing the best tools for developers.</p>`;
            }

            function getAllProductsContent() {
                let html = '<div class="product-grid">';
                if (products.length === 0) {
                     return `<p>No products available yet. Check the Admin Panel to add some!</p>`;
                }
                products.forEach(p => {
                    html += `
                        <div class="product-card">
                            <h4>${p.name}</h4>
                            <p class="price">$${p.price.toFixed(2)}</p>
                        </div>
                    `;
                });
                html += '</div>';
                return html;
            }

            // Centralized Event Listeners for top buttons
            document.querySelectorAll('[data-frame]').forEach(button => {
                button.addEventListener('click', () => {
                    const frameId = button.getAttribute('data-frame');
                    switch (frameId) {
                        case 'home-frame':
                            openFrame('Home', getHomeContent());
                            break;
                        case 'hot-deals-frame':
                            openFrame('Best Deals', getHotDealsContent());
                            break;
                        case 'best-products-frame':
                            openFrame('Best Products', getBestProductsContent());
                            break;
                        case 'info-frame':
                            openFrame('Info', getInfoContent());
                            break;
                        case 'all-products-frame':
                            openFrame('All Products', getAllProductsContent());
                            break;
                        case 'cart-frame':
                            openFrame('Cart', getCartContent());
                            break;
                        case 'admin-frame':
                            const adminContent = `
                                <input type="email" id="admin-email" placeholder="Admin Email">
                                <input type="password" id="admin-password" placeholder="Password">
                                <button class="submit-btn" onclick="window.submitAdminLogin()">Submit</button>
                            `;
                            openFrame('Admin Panel Login', adminContent);
                            break;
                        case 'login-frame':
                            const loginContent = `
                                <input type="email" id="login-email" placeholder="Email">
                                <input type="password" id="login-password" placeholder="Password">
                                <button class="submit-btn" onclick="window.submitLogin()">Login</button>
                            `;
                            openFrame('Login', loginContent);
                            break;
                        case 'signin-frame':
                            const signinContent = `
                                <input type="email" id="signin-email" placeholder="Email">
                                <input type="password" id="signin-password" placeholder="Password">
                                <input type="password" id="signin-password2" placeholder="Confirm Password">
                                <button class="submit-btn" onclick="window.submitSignin()">Create Account</button>
                            `;
                            openFrame('Sign In', signinContent);
                            break;
                        case 'recommend-frame':
                            if (!currentUser) {
                                showMessage('You need to login to access recommendations');
                            } else {
                                openFrame('Recommendations', renderRecommendations());
                            }
                            break;
                        case 'settings-frame':
                             if (!currentUser) {
                                showMessage('You need to login to access settings');
                            } else {
                                openFrame('Settings', getSettingsContent());
                            }
                            break;
                        case 'cookies-frame':
                            openFrame('Cookies Settings', getCookiesContent());
                            break;
                        case 'search-frame':
                            const searchContent = `
                                <div class="search-container">
                                    <input type="text" id="search-input" placeholder="Search products..." onkeyup="window.performSearch()">
                                    <div class="search-results" id="search-results"></div>
                                </div>
                            `;
                            openFrame('Search Products', searchContent);
                            break;
                    }
                });
            });

            // Make these functions available in the global scope
            window.openFrame = openFrame;
            window.closeFrame = closeFrame;
            window.updateQty = updateQty;
            window.removeFromCart = removeFromCart;
            window.clearCart = clearCart;
            window.openCheckout = openCheckout;
            window.buyCart = buyCart;
            window.submitAdminLogin = submitAdminLogin;
            window.addProduct = addProduct;
            window.editProduct = editProduct;
            window.deleteProduct = deleteProduct;
            window.shutdownWebsite = shutdownWebsite;
            window.changeVolume = changeVolume;
            window.saveColors = saveColors;
            window.logout = logout;
            window.acceptCookies = acceptCookies;
            window.declineCookies = declineCookies;
            window.submitLogin = submitLogin;
            window.submitSignin = submitSignin;
            window.submitRecommendation = submitRecommendation;
            window.addToCart = addToCart;
            window.getAdminPanelContent = getAdminPanelContent;
            window.performSearch = performSearch;
            window.showProduct = showProduct;

            // Initial calls
            updateCartBubble();
            renderProducts();
        }
    </script>
    <!-- Font Awesome for social icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>
